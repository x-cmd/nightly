
___x_cmd_ws_root(){
    if [ "${1:-.}" = . ]; then
        local cur="$PWD"
    else
        cd "${1:-.}" 2>&1 && local cur="${PWD}" && cd "$OLDPWD" || return
    fi

    while [ ! "$cur" = "" ]; do
        if [ -d "$cur/.x-cmd" ]; then
            printf "%s\n" "$cur"
            return 0
        fi
        cur=${cur%/*}
    done
    return 1
}
