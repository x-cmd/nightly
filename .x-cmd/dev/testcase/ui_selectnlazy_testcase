
# xrc ui/lib/selectn
. ./lib/selectnlazy

___x_cmd_ui_selectnlazy_mainloop_recursive_first(){
    local nextlist
    local is_stopped=
    {
        ___x_cmd_pidofsubshell
        ___x_cmd_ui_selectnlazy_mainloop_recursive_update_nextlist
        ___x_cmd_ui_selectnlazy_mainloop_recursive 1
    } | {
        local PID_OF_UPSUBSHELL
        read -r PID_OF_UPSUBSHELL

        LC_ALL=en_US.UTF-8 command awk \
        -v RS="$___X_CMD_UI_REGION_RS" \
        -v ORS="$___X_CMD_UI_REGION_RS" \
        -f "$___X_CMD_ROOT/awk/lib/default.awk" \
        -f "$___X_CMD_ROOT/awk/lib/str.awk" \
        -f "$___X_CMD_ROOT/awk/lib/wcwidth.awk" \
        -f "$___X_CMD_ROOT/awk/lib/ui.awk" \
        -f "/home/qiakai/ui/lib/share.awk" \
        -f "/home/qiakai/ui/lib/theme.awk" \
        -f "/home/qiakai/ui/lib/selectnlazy.awk"
        # -f "$___X_CMD_ROOT/ui/lib/share.awk" \
        # -f "$___X_CMD_ROOT/ui/lib/theme.awk" \
        # -f "$___X_CMD_ROOT/ui/lib/selectnlazy.awk"
        kill -SIGPIPE "$PID_OF_UPSUBSHELL"
    }
}

___x_cmd_ui_selectnlazy ___x_cmd_ui_selectnlazy_test_func_ls
echo "___X_CMD_UI_SELECTN_FINAL_COMMAND:" "$___X_CMD_UI_SELECTN_FINAL_COMMAND"
echo "___X_CMD_UI_SELECTN_CURRENT_ITEM:" "$___X_CMD_UI_SELECTN_CURRENT_ITEM"
