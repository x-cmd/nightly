
code="$(cat default.awk json.awk jiter.awk)"

awk "$code"'

function handle( token ){
    if (token == "") return
    if ( jiter_target_eq_( token, jkey(1, "d", "a") ) == true ) {
        print token
        print( jstr( _ ) )
        delete _
    }
}

{
    l = json_split2tokenarr( arr, $0 )
    for (i=1; i<=l; ++i) {
        handle( arr[ i ] )
    }
}

' <<A
{
    "a": "b",
    "c": "3",
    "d": {
        "a": {
            "1": 3
        }
    }
}
A

